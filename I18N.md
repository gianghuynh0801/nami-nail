# Đa ngôn ngữ (i18n)

Dự án dùng **next-intl** với **tiếng Anh (en)** làm ngôn ngữ gốc. Hỗ trợ **Tiếng Việt (vi)** qua file dịch.

## Cấu trúc

- **Ngôn ngữ gốc**: Tiếng Anh (`messages/en.json`)
- **Locales**: `en`, `vi`
- **URL**: Luôn có prefix locale: `/en/...`, `/vi/...` (ví dụ `/en/dashboard`, `/vi/auth/login`)

## File cấu hình

- `i18n/routing.ts` – Cấu hình locales và default
- `i18n/request.ts` – Load messages theo locale
- `i18n/navigation.ts` – Link, redirect, usePathname, useRouter (dùng thay cho `next/link`, `next/navigation` khi cần giữ locale)
- `messages/en.json` – Bản tiếng Anh (gốc)
- `messages/vi.json` – Bản tiếng Việt

## Thêm / sửa bản dịch

1. Sửa hoặc thêm key trong **`messages/en.json`** (luôn chỉnh en trước).
2. Chạy script dịch tự động (LibreTranslate) để cập nhật `vi.json`:

```bash
# Dùng LibreTranslate (cần URL + API key nếu dùng libretranslate.com)
set LIBRETRANSLATE_URL=https://libretranslate.com
set LIBRETRANSLATE_API_KEY=your_key
npm run i18n:translate
```

Self-hosted (không cần API key):

```bash
set LIBRETRANSLATE_URL=http://localhost:5000
npm run i18n:translate
```

Chỉ copy cấu trúc en → vi (không gọi API):

```bash
set SKIP_TRANSLATE=1
npm run i18n:translate
```

Trên Linux/macOS dùng `export` thay cho `set`.

3. Hoặc chỉnh tay **`messages/vi.json`** cho từng key.

## Dùng trong code

- **Server Component**: `getTranslations('Namespace')`, `getLocale()` từ `next-intl/server`; `redirect`, `Link` từ `@/i18n/navigation` (redirect cần `{ href, locale }`).
- **Client Component**: `useTranslations('Namespace')`, `useLocale()` từ `next-intl`; `Link`, `usePathname`, `useRouter` từ `@/i18n/navigation`.
- Điều hướng có locale: luôn dùng `Link` và `redirect` từ `@/i18n/navigation`, không dùng `next/link` hay `redirect` từ `next/navigation` cho route có locale.

## Đổi ngôn ngữ

Trên giao diện: bấm vào bộ chọn ngôn ngữ (EN / Tiếng Việt) trên TopBar trong dashboard.
